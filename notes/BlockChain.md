# 블록체인.md

## 정의

- 수 많은 노드가 P2P 네트워크로 연결되어 트랜잭션을 처리하고 기록하는 ‘분산 원장 시스템’

- 모든 사용자들이 동일한 원장을 소유(분산원장)하여 신뢰를 획득한다. 

​	-> 즉, 네트워크 내의 모든 사용자가 중개기관의 역할을 한다.

## 분산원장의 문제

- 비잔티움 장군 문제
  - 어떤 성을 둘러싼 장군들이, 서로 통신하여 힘을 모아 동시에 성을 공격해야 하는 상황 (= P2P 네트워크)
    - 문제 : 아군끼리의 통신에 적군이 개입하지 않았다는 보장이 없음 => 위/변조가 가능하여, 신뢰성을 잃음.
  - P2P 네트워크에서는 그 누구도 **신뢰할 수 없으며**, 악의적인 참가자에 의한 **위/변조**가 가능하다.
  - **합의 알고리즘**으로 이를 해결하고자 함.
- 이중 지불 문제
  - 분산 디지털 화폐 시스템에서, 동일 토큰이 한 번 이상 소비되는 문제

##합의 알고리즘

- 시스템 간의 특정 데이터에 대한 동일한 값을 유지하기 위해 고안된 개념

- 어떤 Minor가 Block을 채굴하고, 어떤 Chain이 유효한지를 결정. (=> 올바른 Block을 선택함)

- 1) 블록 생성 권한 분배 & 검증 방법 (누가 블록을 채굴하나?)

- 2) fork 발생 시, 하나의 블록체인 선택 방법 (어느 체인이 유효한가?)

  ### 1) PoW (Proof of Work)

  > 열심히 시간과 돈을 투자해서 문제를 푼 사람을 믿자! (채굴능력 = 계산능력)

  - 블록 생성 권한자 : 네트워크에 참여하는 모든 노드들.
  - 블록 생성 과정
    - 1) 작업 증명 통과
      - i) 블록 해시는 Difficulty에 따라 선택된 Target 데이터 규격을 만족해야 함.
      - ii) 조건 만족을 위해, Nonce 값을 임의로 대입
      - iii) Nonce 값이 Target 데이터 조건을 만족하면, 작업 증명 통과
    - 2) 블록 생성

  ### 2) PoS (Proof Of Stake)

  > 지분이 많은 사람을 믿자! (채굴능력 = 지분량) [직접 민주주의]
  >
  > **DPoS** : 지분을 갖고 있는 사람 중, 제한된 수의 사람만 믿자! [간접 민주주의]

  ### 3) PoA (Proof Of Authority)

  > 특정 권한을 가진 사람만 믿자!

  ### 4) PBFT (Partical Byzantine Fault Torance)

  > 다수의 의사결정을 믿자!


## BlockChain

Block들로 이루어진 연결리스트. 

각 블록은, 바로 앞의 블록에 대한 링크를 가지고 있음.

![IHS979r.png](https://steemitimages.com/0x0/https://cdn.steemitimages.com/DQmbhR1eidcNDYYN2C129Z6cp24oYGDDiNcBTRp22ag5Co3/IHS979r.png)

## Block

거래내역을 입증 및 기록.

<u>올바른</u> 트랜잭션을 모두 보관하는 블록체인 트랜잭션 보관 데이터베이스.

![image-20181021220831621](/Users/lawrence/Library/Application Support/typora-user-images/image-20181021220831621.png)

- Block hash 
  - Block의 고유 hash 값. 
  - Block Header 정보들의 합 -> SHA 256 방식으로 변환된 결과 값
  - 해시 연결성을 검증하여 블록체인 데이터가 위변조되지 않았음을 확인하는 역할.
- 채굴 (Mining)
  - 특정 수학적 연산을 수행하여 Nonce 값을 구하는 행위 
  - 복잡한 연산은 아니지만 반복적인 작업을 필요로 하는 단순 연산으로 높은 컴퓨팅 파워를 가질수록 유리

## 스마트 컨트랙트 

중개자 없이 P2P로 쉽고 편리하게 계약을 체결하고 수정할 수 있는 기술.

계약의 실행을 컴퓨터가 자동으로 수행.

계약은 '신뢰'가 매우매우 중요함.

스마트 컨트랙트는, '코드' 자체가 신뢰를 보장하는 자동화된 계약

